<div class="container-fluid py-4">

    <%- include("../../partials/filsDAriane.ejs") %>
</div>
<div class="container py-4">

</div>
<form class="bg-white px-4 py-4" method="POST" action="/demandes/edit/frequentation/<%= frequentation.identifiant %>">
    <h1>Modifier le certificat de fréquentation</h1>
    <div class="row g-3">
        <div class="form-section-header border-info d-flex justify-content-between">
            <div class="">
                 <h3 class="fw-bold text-primary">
                <i class="bi bi-mortarboard-fill fs-1 me-2"></i>Informations sur l'etudiant
            </h3>
            </div>
           
            <%- include("../../partials/btnEdit.ejs") %>
        </div>
    
        <!-- Civilité -->
        <div class="col-md-2">
            <label class="form-label fw-semibold">Civilité</label>
            <select name="civilite" id="civilite" class="form-select shadow-sm" required>
                <option value="" selected disabled class="text-muted">Choisir</option>
                <option value="M." <%= frequentation.civilite === "M." ? "selected" : "" %>>M.</option>
                <option value="Mme" <%= frequentation.civilite === "Mme" ? "selected" : "" %>>Mme</option>
                <option value="Mlle" <%= frequentation.civilite === "Mlle" ? "selected" : "" %>>Mlle</option>
            </select>
        </div>
    
        <!-- Nom -->
        <div class="col-md-3">
            <label class="form-label fw-semibold">Nom</label>
            <input type="text" name="nom" id="nom" class="form-control shadow-sm" placeholder="Entrez votre nom" required value="<%= frequentation.nom %>">
        </div>
    
        <!-- Prénom -->
        <div class="col-md-3">
            <label class="form-label fw-semibold">Prénom</label>
            <input type="text" name="prenom" id="prenom" class="form-control shadow-sm" placeholder="Entrez votre prénom" value="<%= frequentation.prenom %>" required>
        </div>
    
        <!-- Filière -->
        <div class="col-md-2">
            <label class="form-label fw-semibold">Filière</label>
            <select name="filiere" id="filiere" class="form-select shadow-sm" required>
                <option value="" selected disabled class="text-muted">Choisir une filière</option>
                <option value="AB" <%= frequentation.filiere === "AB" ? "selected" : "" %>>AB</option>
                <option value="AG" <%= frequentation.filiere === "AG" ? "selected" : "" %>>AG</option>
                <option value="CFA" <%= frequentation.filiere === "CFA" ? "selected" : "" %>>CFA</option>
                <option value="3ER" <%= frequentation.filiere === "3ER" ? "selected" : "" %>>3ER</option>
                <option value="GI" <%= frequentation.filiere === "GI" ? "selected" : "" %>>GI</option>
                <option value="HT" <%= frequentation.filiere === "HT" ? "selected" : "" %>>HT</option>
                <option value="MA" <%= frequentation.filiere === "MA" ? "selected" : "" %>>MA</option>
                <option value="MC" <%= frequentation.filiere === "MC" ? "selected" : "" %>>MC</option>
            </select>
        </div>
    
        <!-- Niveau -->
        <div class="col-md-2">
            <label class="form-label fw-semibold">Niveau</label>
            <select name="niveau" id="niveau" class="form-select shadow-sm" required>
                <option value="" selected disabled class="text-muted">Niveau</option>
                <option value="L1" <%= frequentation.niveau === "L1" ? "selected" : "" %>>L1</option>
                <option value="L2" <%= frequentation.niveau === "L2" ? "selected" : "" %>>L2</option>
                <option value="L3" <%= frequentation.niveau === "L3" ? "selected" : "" %>>L3</option>
            </select>
        </div>
      
        <!-- Promotion -->
        <div class="col-md-2">
            <label class="form-label fw-semibold">Promotion</label>
            <input type="number" name="promotion" id="promotion" class="form-control shadow-sm" placeholder="Entrez votre promotion" value="<%= frequentation.promotion %>" required min="2015" max="2026" step="1">
        </div>
        
        <!-- Matricule -->
        <div class="col-md-4">
            <label class="form-label fw-semibold">Numéro matricule</label>
            <input type="text" name="matricule" id="matricule" class="form-control shadow-sm" placeholder="Numero Matricule" value="<%= frequentation.matricule %>" required>
        </div>
      <!-- Email -->
      <div class="col-md-4">
        <label class="form-label fw-semibold">Email</label>
        <input type="email" name="email" id="email" class="form-control shadow-sm" placeholder="Email" value="<%= frequentation.email %>" required>
    </div>
    </div>
    <hr class="mx-4">
    
    <div class="form-section bg-white shadow-sm" id="form-frequentation">
        <div class="form-section-header border-success">
            <h3 class="fw-bold text-primary">
                <i class="bi bi-calendar-check fs-1 me-2"></i>Informations sur le Certificat de Fréquentation
            </h3>
        </div>
        
        <!-- Période concernée -->
        <div class="mb-4">
            <h5 class="fw-bold mb-3">Période concernée</h5>
            <div class="row g-3">
                <!-- Licence 1 -->
                <div class="col-md-3 col-6">
                    <div class="card border h-100">
                        <div class="card-body">
                            <h6 class="card-title text-center fw-bold">Licence 1</h6>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" name="periode" value="S1"
                                    id="freqL1S1" <%= frequentation.periode && frequentation.periode.includes('S1') ? 'checked' : '' %>>
                                <label class="form-check-label" for="freqL1S1">Semestre 1</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" name="periode" value="S2"
                                    id="freqL1S2" <%= frequentation.periode && frequentation.periode.includes('S2') ? 'checked' : '' %>>
                                <label class="form-check-label" for="freqL1S2">Semestre 2</label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Licence 2 -->
                <div class="col-md-3 col-6">
                    <div class="card border h-100">
                        <div class="card-body">
                            <h6 class="card-title text-center fw-bold">Licence 2</h6>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" name="periode" value="S3"
                                    id="freqL2S1" <%= frequentation.periode && frequentation.periode.includes('S3') ? 'checked' : '' %>>
                                <label class="form-check-label" for="freqL2S1">Semestre 3</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" name="periode" value="S4"
                                    id="freqL2S2" <%= frequentation.periode && frequentation.periode.includes('S4') ? 'checked' : '' %>>
                                <label class="form-check-label" for="freqL2S2">Semestre 4</label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Licence 3 -->
                <div class="col-md-3 col-6">
                    <div class="card border h-100">
                        <div class="card-body">
                            <h6 class="card-title text-center fw-bold">Licence 3</h6>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" name="periode" value="S5"
                                    id="freqL3S1" <%= frequentation.periode && frequentation.periode.includes('S5') ? 'checked' : '' %>>
                                <label class="form-check-label" for="freqL3S1">Semestre 5</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" name="periode" value="S6"
                                    id="freqL3S2" <%= frequentation.periode && frequentation.periode.includes('S6') ? 'checked' : '' %>>
                                <label class="form-check-label" for="freqL3S2">Semestre 6</label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Cycle complet -->
                <div class="col-md-3 col-6">
                    <div class="card border h-100">
                        <div class="card-body">
                            <h6 class="card-title text-center fw-bold">Cycle complet</h6>
                            <div class="form-check d-flex justify-content-center">
                                <input class="form-check-input me-2" type="checkbox" name="freq_cycle" value="1"
                                    id="freqCycle" <%= frequentation.freq_cycle == 1 ? 'checked' : '' %>>
                                <label class="form-check-label" for="freqCycle">Tous les semestres</label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Destination -->
        <div class="mb-4">
            <h5 class="fw-bold mb-3">Destination du certificat</h5>
            <div class="row">
                <div class="col-md-6">
                    <div class="form-check mb-2">
                        <input class="form-check-input" type="radio" name="destination" id="destAdmin"
                            value="admin" <%= frequentation.destination === 'admin' ? 'checked' : '' %>>
                        <label class="form-check-label" for="destAdmin">Usage administratif interne
                            (Université)</label>
                    </div>

                    <div class="form-check mb-2">
                        <input class="form-check-input" type="radio" name="destination" id="destBourse"
                            value="bourse" <%= frequentation.destination === 'bourse' ? 'checked' : '' %>>
                        <label class="form-check-label" for="destBourse">Bourse d'étude</label>
                    </div>

                    <div class="form-check mb-2">
                        <input class="form-check-input" type="radio" name="destination" id="destEmploi"
                            value="emploi" <%= frequentation.destination === 'emploi' ? 'checked' : '' %>>
                        <label class="form-check-label" for="destEmploi">Emploi</label>
                    </div>

                    <div class="form-check mb-3">
                        <input class="form-check-input" type="radio" name="destination" id="destStage"
                            value="stage" <%= frequentation.destination === 'stage' ? 'checked' : '' %>>
                        <label class="form-check-label" for="destStage">Stage</label>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Statut (ajouté) -->
        <div class="row">
            <div class="col-md-6">
                <div class="mb-4">
                    <label class="form-label fw-semibold">Statut</label>
                    <select class="form-select" name="statut">
                        <option value="En attente" <%= frequentation.statut === 'En attente' ? 'selected' : '' %>>En attente</option>
                        <option value="validee" <%= frequentation.statut === 'validee' ? 'selected' : '' %>>Validée</option>
                        <option value="rejetee" <%= frequentation.statut === 'rejetee' ? 'selected' : '' %>>Rejetée</option>
                    </select>
                </div>
            </div>
        </div>
        
        
    </div>
</form>